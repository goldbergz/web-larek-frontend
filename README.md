# Проектная работа "Веб-ларек"

Веб-ларек - это современный интернет-магазин, специализирующийся на товарах для веб-разработчиков. Проект представляет собой полнофункциональное SPA-приложение с каталогом товаров, корзиной покупок и многошаговым оформлением заказа.

Ключевая особенность проекта — чёткое разделение **View-компонентов**, **моделей данных**, **контроллеров** и **событийной системы**, что делает код прозрачным, тестируемым и легко расширяемым.


#### Стек: HTML, SCSS, TS, Webpack

#### Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом
- src/types/ — папка с типизацией компанентов
- src/types/base/ — папка с базовыми типами и основными сущностями
- src/types/model/ — папка с типизацией компонентов модели проекта
- src/types/view/ — папка с типизацией компонентов отображения проекта

#### Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура проекта

### Базовые структуры данных

```typescript
// Основной товар
interface IProduct {
  id: string;
  title: string;
  description: string;
  image: string;
  category: string;
  price: number;
}

// Элемент корзины
interface IBasketItem {
  product: IProduct;
}

// Настройки корзины
export interface PaymentSettings {
  paymentType: "online" | "upon receipt";
  address: string;
}

export interface PaymentContacts {
  email: string;
  phone: string;
}

export interface OrderSettings {
  paymentSettings: PaymentSettings;
  paymentContacts: PaymentContacts;
}

export interface Order extends OrderSettings {
  items: IBasketItem[];
  totalPrice: number;
}
```

### Модели (Models)

1. ProductModel
- Управляет каталогом товаров
- Загружает данные через API
- Предоставляет доступ к товарам по ID

2. BasketModel
- Управляет состоянием корзины
- Добавляет/удаляет товары
- Вычисляет общую стоимость
- Синхронизирует состояние между компонентами

3. OrderModel
- Управляет процессом оформления заказа
- Валидирует данные оплаты и контактов
- Создает заказ через API

### Представления (Views)

#### Базовые компоненты:

```IView``` - базовый интерфейс для всех UI-компонентов

```IDataView<T>``` - универсальный интерфейс для рендеринга данных модели

```IModal``` - унифицированный интерфейс модальных окон

```IList<T>``` - переиспользуемый список для каталога и корзины

#### Специализированные компоненты:

```ProductListView``` - отображает каталог товаров

```BasketListView``` - отображает содержимое корзины

```ProductModal``` - модеальное окно с детальной информацией о товаре

```OrderModal``` - модеальное окно с многошаговым оформлением заказа

```BasketModal``` - модеальное окно корзины

### Сервисы

1. ApiClient
- Централизованный HTTP-клиент
- Обрабатывает GET/POST запросы
- Преобразует ответы сервера

2. AppEvents
- Управляет событиями между компонентами
- Обеспечивает слабую связанность

## Взаимодействие компонентов
#### Процесс просмотра и добавления товара:
1. ProductModel загружает товары через ApiClient
2. ProductListView отображает каталог, используя ProductCard компоненты
3. При клике на товар генерируется PRODUCT_SELECTED событие
4. ProductModal открывается с детальной информацией
5. Добавление в корзину → BASKET_ADD → BasketModel обновляет состояние

#### Процесс оформления заказа:
1. Открытие корзины → BASKET_OPEN → BasketModal
2. Начало оформления → ORDER_START → OrderModal
3. Шаг 1: Ввод платежных данных → OrderModel валидация
4. Шаг 2: Ввод контактов → OrderModel валидация
5. Подтверждение → ORDER_SUCCESS → создание заказа через API


```
┌─────────────────┐         ┌───────────┐         ┌─────────────────┐
│    Модели       │ ◄─────  │Контроллер │ ──────► │   Представления │
│  (Product,      │ ──────► │ (события  │ ◄─────  │  (Modals, Lists)│
│   Basket, Order)│         │ AppEvents)│         │                 │
└─────────────────┘         └───────────┘         └─────────────────┘
         │                                                 │
         ▼                                                 ▼
┌─────────────────┐                               ┌─────────────────┐
│   API Client    │                               │      DOM        │
│                 │                               │                 │
└─────────────────┘                               └─────────────────┘
```

